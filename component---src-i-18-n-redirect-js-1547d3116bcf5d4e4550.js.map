{"version":3,"sources":["webpack:///./src/components/utils/getColor.js","webpack:///./src/components/Link.js","webpack:///./src/i18n/Link.js","webpack:///./src/i18n/redirect.js","webpack:///./node_modules/browser-lang/dist/index.js"],"names":["customColor","prop","cssProperty","style","key","linkStyle","css","fontSize","space","color","fontWeight","lineHeight","letterSpacing","display","disabled","NomalLink","styled","tag","GatsbyStyledLink","GatsbyLink","Link","to","blacklist","button","props","is","target","displayName","defaultProps","I18nLink","render","this","children","rest","locale","context","toWithLang","PureComponent","contextType","LanguageContext","Redirect","langKeys","languages","map","language","value","redirectPage","pageContext","window","detected","localStorage","getItem","APP_NAME","browserLang","fallback","newUrl","withPrefix","setItem","location","replace","getBrowserLang","navigator","browserLanguage","userLanguage","systemLanguage","normalizeCode","code","toLowerCase","Object","defineProperty","exports","_default","options","match","filter","lang","length","string","position","concat","slice"],"mappings":"6FAAA,kDAEaA,EAAc,SAACC,EAAMC,GAAP,gBAAOA,MAAc,SAAYC,YAAO,CACjEF,OACAC,cACAE,IAAK,a,kNCYP,IAAMC,EAAYC,YAAH,uEACXC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,KAEA,qBAAGC,UAAuB,oCAIxBd,YAAY,eAIZe,EAAYC,YAAOC,KAAV,qEAAGD,CAAH,QACXX,GAGEa,EAAmBF,YAAOG,QAAV,4EAAGH,CAAH,QAClBX,GAGEe,EAAO,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,GAAYC,GAA0B,EAAlCC,OAAkC,EAA1BD,WAAcE,E,oIAAY,gCACpD,OAAIH,EAEA,kBAACH,EAAD,eAAkBG,GAAIA,GAAQG,IAIhC,kBAACT,EAAD,eACEU,GAAG,IACHC,OAAO,SACPJ,UAAWA,GACNE,KAKXJ,EAAKO,YAAc,OAEnBP,EAAKQ,aAAe,CAClBN,cACAZ,WAAY,QAGCU,Q,gBC3DTS,E,0LACJC,OAAA,WAAU,IAAD,EAC2BC,KAAKP,MAA/BH,EADD,EACCA,GAAIW,EADL,EACKA,SAAaC,E,oIADlB,sBAECC,EAAWH,KAAKI,QAAhBD,OACAE,EAAaF,EAAM,IAAOA,EAASb,EAAhB,GAA0BA,EACrD,OACE,kBAAC,EAAD,eAAMA,GAAIe,GAAgBH,GACvBD,I,GAPcK,iBAkBvBR,EAASS,YAAcC,IAERV,O,iLCrBTW,E,qHACJ,WAAYhB,GAAQ,IAAD,EACjB,cAAMA,IAAN,KACA,IAAMiB,EAAWC,YAAUC,KAAI,SAAAC,GAAQ,OAAIA,EAASC,SAC5CC,EAAiBtB,EAAMuB,YAAvBD,aAGR,GAAsB,oBAAXE,OAAwB,CACjC,IAAMC,EACJD,OAAOE,aAAaC,QAAWC,+BAC/BC,IAAY,CACVX,UAAWD,EACXa,SAAU,eAGRC,EAASC,qBAAW,IAAIP,EAAWH,GACzCE,OAAOE,aAAaO,QAAWL,6BAAiBH,GAChDD,OAAOU,SAASC,QAAQJ,GAhBT,S,mBAoBnBzB,OAAA,WACE,OAAO,+B,GAtBYO,iBA0BRG,a,kCCJf,SAASoB,IACP,MAAsB,oBAAXZ,OACF,KAGEA,OAAOa,UAAUnB,WAAaM,OAAOa,UAAUnB,UAAU,IAAMM,OAAOa,UAAUjB,UAAYI,OAAOa,UAAUC,iBAAmBd,OAAOa,UAAUE,cAAgBf,OAAOa,UAAUG,gBAAkB,KAIjN,SAASC,EAAcC,GACrB,OAAOA,EAAKC,cAAcR,QAAQ,IAAK,KAnCzC,EAAQ,QAER,EAAQ,QAER,EAAQ,QAERS,OAAOC,eAAeC,EAAS,aAAc,CAC3CzB,OAAO,IAETyB,EAAiB,aAAI,EA+DrB,IAAIC,EAlCJ,SAA8BC,GAC5B,IAAKA,EACH,OAAOZ,IAGT,IAAIlB,EAAY8B,EAAQ9B,UACpBY,EAAWkB,EAAQlB,SAEvB,IAAKkB,EAAQ9B,UACX,OAAOY,EAIT,IAAIQ,EAAkBG,EAAcL,KAEpC,IAAKE,EACH,OAAOR,EAGT,IAAImB,EAAQ/B,EAAUgC,QAAO,SAAUC,GACrC,OAAOV,EAAcU,KAAUb,KAGjC,OAAIW,EAAMG,OAAS,EACVH,EAAM,IAAMnB,EAIDZ,EAAUgC,QAAO,SAAUC,GAC7C,OAxDwBjD,EAwDWiD,EAvDjCC,GADcC,EAwDEf,GAvDAc,QACpBE,EAAuB,MAAZA,EAAmB,EAAIA,GAEnB,EACbA,EAAW,EACFA,EAAWF,IACpBE,EAAWF,GAGblD,EAAS,GAAGqD,OAAOrD,GACZmD,EAAOG,MAAMF,EAAUA,EAAWpD,EAAOkD,SAAWlD,EAX7D,IAAoBmD,EAAQnD,EAAQoD,EAC9BF,KAyDiB,IAAMtB,GAI7BgB,EAAiB,QAAIC","file":"component---src-i-18-n-redirect-js-1547d3116bcf5d4e4550.js","sourcesContent":["import { style } from 'styled-system';\n\nexport const customColor = (prop, cssProperty = 'color') => style ({\n  prop,\n  cssProperty,\n  key: 'colors',\n});\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n  fontSize,\n  fontWeight,\n  lineHeight,\n  space,\n  color,\n  letterSpacing,\n  display,\n} from 'styled-system';\nimport tag from 'clean-tag';\nimport { Link as GatsbyLink } from 'gatsby';\n\nimport blacklist from './utils/blacklist';\nimport { customColor } from './utils/getColor';\n\nconst linkStyle = css`\n  ${fontSize}\n  ${space}\n  ${color}\n  ${fontWeight}\n  ${lineHeight}\n  ${letterSpacing}\n  ${display}\n  text-decoration: none;\n  ${({ disabled }) => disabled && `\n    pointer-events: none;\n  `}\n  &:hover {\n    ${customColor('hoverColor')};\n  }\n`;\n\nconst NomalLink = styled(tag)`\n  ${linkStyle}\n`;\n\nconst GatsbyStyledLink = styled(GatsbyLink)`\n  ${linkStyle}\n`;\n\nconst Link = ({ to, button, blacklist, ...props }) => {\n  if (to) {\n    return (\n      <GatsbyStyledLink to={to} {...props} />\n    );\n  }\n  return (\n    <NomalLink\n      is=\"a\"\n      target=\"_blank\"\n      blacklist={blacklist}\n      { ...props }\n    />\n  );\n};\n\nLink.displayName = 'Link';\n\nLink.defaultProps = {\n  blacklist,\n  fontWeight: 'bold',\n};\n\nexport default Link;\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Link from 'components/Link'\nimport LanguageContext from './LanguageContext';\n\nclass I18nLink extends PureComponent {\n  render() {\n    const { to, children, ...rest } = this.props;\n    const { locale } = this.context;\n      const toWithLang = locale ? `/${locale}${to}` : `${to}`\n    return (\n      <Link to={toWithLang} {...rest}>\n        {children}\n      </Link>\n    )\n  }\n}\n\nI18nLink.propTypes = {\n  to: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n}\n\nI18nLink.contextType = LanguageContext\n\nexport default I18nLink\n","import React, { PureComponent } from 'react'\nimport { withPrefix } from 'gatsby'\nimport browserLang from 'browser-lang'\nimport { languages } from './index'\n\nclass Redirect extends PureComponent {\n  constructor(props) {\n    super(props)\n    const langKeys = languages.map(language => language.value)\n    const { redirectPage } = props.pageContext\n\n    // Skip build, Browsers only\n    if (typeof window !== 'undefined') {\n      const detected =\n        window.localStorage.getItem(`${APP_NAME}_LANG`) ||\n        browserLang({\n          languages: langKeys,\n          fallback: 'zh-Hant-TW',\n        })\n\n      const newUrl = withPrefix(`/${detected}${redirectPage}`)\n      window.localStorage.setItem(`${APP_NAME}_LANG`, detected)\n      window.location.replace(newUrl)\n    }\n  }\n\n  render() {\n    return <div />\n  }\n}\n\nexport default Redirect\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction startsWith(string, target, position) {\n  var length = string.length;\n  position = position == null ? 0 : position;\n\n  if (position < 0) {\n    position = 0;\n  } else if (position > length) {\n    position = length;\n  }\n\n  target = \"\".concat(target);\n  return string.slice(position, position + target.length) == target;\n}\n\nfunction getBrowserLang() {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  var lang = window.navigator.languages && window.navigator.languages[0] || window.navigator.language || window.navigator.browserLanguage || window.navigator.userLanguage || window.navigator.systemLanguage || null;\n  return lang;\n}\n\nfunction normalizeCode(code) {\n  return code.toLowerCase().replace(/-/, \"_\");\n}\n\nfunction getPreferredLanguage(options) {\n  if (!options) {\n    return getBrowserLang();\n  }\n\n  var languages = options.languages,\n      fallback = options.fallback;\n\n  if (!options.languages) {\n    return fallback;\n  } // some browsers report language as en-US instead of en_US\n\n\n  var browserLanguage = normalizeCode(getBrowserLang());\n\n  if (!browserLanguage) {\n    return fallback;\n  }\n\n  var match = languages.filter(function (lang) {\n    return normalizeCode(lang) === browserLanguage;\n  });\n\n  if (match.length > 0) {\n    return match[0] || fallback;\n  } // en == en_US\n\n\n  var matchCodeOnly = languages.filter(function (lang) {\n    return startsWith(browserLanguage, lang);\n  });\n  return matchCodeOnly[0] || fallback;\n}\n\nvar _default = getPreferredLanguage;\nexports[\"default\"] = _default;"],"sourceRoot":""}