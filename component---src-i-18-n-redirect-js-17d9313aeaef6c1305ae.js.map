{"version":3,"sources":["webpack:///./src/components/Link.js","webpack:///./src/components/utils/getColor.js","webpack:///./src/i18n/Link.js","webpack:///./src/i18n/redirect.js","webpack:///./node_modules/browser-lang/dist/index.js"],"names":["linkStyle","css","fontSize","space","color","fontWeight","lineHeight","letterSpacing","display","disabled","customColor","NomalLink","styled","tag","GatsbyStyledLink","GatsbyLink","Link","to","blacklist","button","props","is","target","displayName","defaultProps","prop","cssProperty","style","key","I18nLink","render","this","children","rest","locale","context","toWithLang","PureComponent","contextType","LanguageContext","Redirect","langKeys","languages","map","language","value","redirectPage","pageContext","window","detected","localStorage","getItem","APP_NAME","browserLang","fallback","newUrl","withPrefix","setItem","location","replace","getBrowserLang","navigator","browserLanguage","userLanguage","systemLanguage","normalizeCode","code","toLowerCase","Object","defineProperty","exports","_default","options","match","filter","lang","length","string","position","concat","slice"],"mappings":"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","file":"component---src-i-18-n-redirect-js-17d9313aeaef6c1305ae.js","sourcesContent":["import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport {\r\n  fontSize,\r\n  fontWeight,\r\n  lineHeight,\r\n  space,\r\n  color,\r\n  letterSpacing,\r\n  display,\r\n} from 'styled-system';\r\nimport tag from 'clean-tag';\r\nimport { Link as GatsbyLink } from 'gatsby';\r\n\r\nimport blacklist from './utils/blacklist';\r\nimport { customColor } from './utils/getColor';\r\n\r\nconst linkStyle = css`\r\n  ${fontSize}\r\n  ${space}\r\n  ${color}\r\n  ${fontWeight}\r\n  ${lineHeight}\r\n  ${letterSpacing}\r\n  ${display}\r\n  text-decoration: none;\r\n  ${({ disabled }) => disabled && `\r\n    pointer-events: none;\r\n  `}\r\n  &:hover {\r\n    ${customColor('hoverColor')};\r\n  }\r\n`;\r\n\r\nconst NomalLink = styled(tag)`\r\n  ${linkStyle}\r\n`;\r\n\r\nconst GatsbyStyledLink = styled(GatsbyLink)`\r\n  ${linkStyle}\r\n`;\r\n\r\nconst Link = ({ to, button, blacklist, ...props }) => {\r\n  if (to) {\r\n    return (\r\n      <GatsbyStyledLink to={to} {...props} />\r\n    );\r\n  }\r\n  return (\r\n    <NomalLink\r\n      is=\"a\"\r\n      target=\"_blank\"\r\n      blacklist={blacklist}\r\n      { ...props }\r\n    />\r\n  );\r\n};\r\n\r\nLink.displayName = 'Link';\r\n\r\nLink.defaultProps = {\r\n  blacklist,\r\n  fontWeight: 'bold',\r\n};\r\n\r\nexport default Link;\r\n","import { style } from 'styled-system';\r\n\r\nexport const customColor = (prop, cssProperty = 'color') => style ({\r\n  prop,\r\n  cssProperty,\r\n  key: 'colors',\r\n});\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Link from 'components/Link'\r\nimport LanguageContext from './LanguageContext';\r\n\r\nclass I18nLink extends PureComponent {\r\n  render() {\r\n    const { to, children, ...rest } = this.props;\r\n    const { locale } = this.context;\r\n      const toWithLang = locale ? `/${locale}${to}` : `${to}`\r\n    return (\r\n      <Link to={toWithLang} {...rest}>\r\n        {children}\r\n      </Link>\r\n    )\r\n  }\r\n}\r\n\r\nI18nLink.propTypes = {\r\n  to: PropTypes.string.isRequired,\r\n  children: PropTypes.node.isRequired,\r\n}\r\n\r\nI18nLink.contextType = LanguageContext\r\n\r\nexport default I18nLink\r\n","import React, { PureComponent } from 'react'\r\nimport { withPrefix } from 'gatsby'\r\nimport browserLang from 'browser-lang'\r\nimport { languages } from './index'\r\n\r\nclass Redirect extends PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    const langKeys = languages.map(language => language.value)\r\n    const { redirectPage } = props.pageContext\r\n\r\n    // Skip build, Browsers only\r\n    if (typeof window !== 'undefined') {\r\n      const detected =\r\n        window.localStorage.getItem(`${APP_NAME}_LANG`) ||\r\n        browserLang({\r\n          languages: langKeys,\r\n          fallback: 'zh-Hant-TW',\r\n        })\r\n\r\n      const newUrl = withPrefix(`/${detected}${redirectPage}`)\r\n      window.localStorage.setItem(`${APP_NAME}_LANG`, detected)\r\n      window.location.replace(newUrl)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div />\r\n  }\r\n}\r\n\r\nexport default Redirect\r\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction startsWith(string, target, position) {\n  var length = string.length;\n  position = position == null ? 0 : position;\n\n  if (position < 0) {\n    position = 0;\n  } else if (position > length) {\n    position = length;\n  }\n\n  target = \"\".concat(target);\n  return string.slice(position, position + target.length) == target;\n}\n\nfunction getBrowserLang() {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  var lang = window.navigator.languages && window.navigator.languages[0] || window.navigator.language || window.navigator.browserLanguage || window.navigator.userLanguage || window.navigator.systemLanguage || null;\n  return lang;\n}\n\nfunction normalizeCode(code) {\n  return code.toLowerCase().replace(/-/, \"_\");\n}\n\nfunction getPreferredLanguage(options) {\n  if (!options) {\n    return getBrowserLang();\n  }\n\n  var languages = options.languages,\n      fallback = options.fallback;\n\n  if (!options.languages) {\n    return fallback;\n  } // some browsers report language as en-US instead of en_US\n\n\n  var browserLanguage = normalizeCode(getBrowserLang());\n\n  if (!browserLanguage) {\n    return fallback;\n  }\n\n  var match = languages.filter(function (lang) {\n    return normalizeCode(lang) === browserLanguage;\n  });\n\n  if (match.length > 0) {\n    return match[0] || fallback;\n  } // en == en_US\n\n\n  var matchCodeOnly = languages.filter(function (lang) {\n    return startsWith(browserLanguage, lang);\n  });\n  return matchCodeOnly[0] || fallback;\n}\n\nvar _default = getPreferredLanguage;\nexports[\"default\"] = _default;"],"sourceRoot":""}